<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            background-color: black;
        }
        * {
            color: white;
        }
        button {
            color: white;
            background-color: rgb(44, 119, 0);
            border: none;
            border-radius: 5px;
            box-shadow: 1px 1px 1px;
        }
    </style>
</head>
<body>
    <p>hello!!<br>3 - 6</p>
    <button id="btn">Click Here!!</button>


    <script>

        // ES8ì—ì„œ ë‚˜ì˜¨ ì—…ê·¸ë ˆì´ë“œ ë¬¸ë²•
        // ì˜ë¬´ ì•„ë‹Œ ì½”ë“œ ê¹”ë”í•˜ê²Œ í•´ì£¼ëŠ” ì˜µì…˜!!

        // ì—°ì‚° ëë‚˜ê³  íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤?
        /* 1. ì½œë°±í•¨ìˆ˜
        function calc(ì½œë°±í•¨ìˆ˜){
            1+1
            ì½œë°±í•¨ìˆ˜()
        }
        */
        /* 2. Promise
        function calc(){
            1+1;
        }
        calcí”„ë¡œë¯¸ìŠ¤ì— ë„£ì–´ì„œ.then(function(){})
        */
        // âœ… 3. async
        // Promise ë§Œë“¤ê¸° ê·€ì°®ë‹¤!
        async function calc(){ // í•¨ìˆ˜ì—ë§Œ ë¶™ì¼ ìˆ˜ ìˆëŠ” async
                               //   => í•¨ìˆ˜ ì‹¤í–‰ í›„ Promise ì˜¤ë¸Œì íŠ¸ê°€ ë‚¨ìŒ!!
            return 1+1; // ê²°ê³¼ ë„˜ê¸°ê¸°ë„ ê°€ëŠ¥!!
        }
        calc().then(function(result){ // í•¨ìˆ˜ì— ë°”ë¡œ .then ì‚¬ìš©ê°€ëŠ¥
            console.log(result)
        })

        // asyncì˜ ë‹¨ì  => ì„±ê³µë§Œ íŒë‹¨ ê°€ëŠ¥!!!
        // ì‹¤íŒ¨ ê°•ì œë¡œ ë³´ë‚¼ ìˆ˜ëŠ” ìˆìŒ
        /*
        async function calc2(){
            return Promise.reject('fail');
        }
        calc2().then(function(result){
            console.log(result)
        })
        */


        // âœ… asyncí•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì“¸ ìˆ˜ ìˆëŠ” await
        // í•¨ìˆ˜ ì•ˆì—ì„œ Promise ì“°ê¸°
        async function sum(){
            var promise = new Promise((resolve, reject)=>{
                var sumResult = 3+6;
                // resolve(sumResult);
                // ğŸ”¸ ì‹¤íŒ¨ íŒì •ì‹œ awaitì€ ì˜¤ë¥˜ë‚˜ê³  ì •ì§€
                reject();
            })

            /* ê¸°ì¡´
            promise.then(function(){
                console.log('success')
            })
            */

            // await í™œìš©
            /*
            var result = await promise; // await => í”„ë¡œë¯¸ìŠ¤ í•´ê²°(ì„±ê³µ/ì‹¤íŒ¨)ê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!
            // ì„±ê³µíŒì •ì— ë“¤ì–´ìˆë˜ ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ë‹´ì•„ì¤Œ
            console.log(result);
            */


            // ğŸ”¸ awaitì€ í”„ë¡œë¯¸ìŠ¤ ì‹¤íŒ¨ íŒì •ì‹œ ì—ëŸ¬ë‚˜ê³  ì½”ë“œê°€ ë©ˆì¶¤!!!
            //   í•´ê²°ë²• => try{}catch{}ë¬¸!!
            try{
                var result = await promise;
                console.log(result);
            }catch{
                console.log('fail!!')
            }
        }
        sum();



        // ì˜ˆì œ
        async function btnClick(){

            /* ë‚´ í’€ì´ => ì‹¤í–‰ì€ ì˜ë¨, ê·¼ë° ì¢€ ì´ìƒí•¨
            var btn = document.getElementById('btn').addEventListener('click', async function(){
                var promiseBtn = new Promise((resolve, reject)=>{
                    return resolve();
                })
                var btntf = await promiseBtn;
                console.log('success')
            })
            */ 
            
            // ì •ì„ í’€ì´
            var promiseBtn = new Promise((resolve, reject)=>{
                document.getElementById('btn').addEventListener('click', function(){
                    return resolve('success');
                })
            });

            var btntf = await promiseBtn;
            console.log(btntf);

        }
        btnClick();
        // ë”±íˆ ìœ ìš©í•œì§€ ì˜ ëª¨ë¥¼ ìˆ˜ ìˆëŠ”ë°
        // ìˆœì°¨ì ìœ¼ë¡œ ë§ì€ê±¸ ì‹¤í–‰í•  ë•Œ ìœ ìš©í•˜ë‹¤
        


    </script>

    
</body>
</html>